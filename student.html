<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X·ªï S·ªë T·∫øt 2026 - 11 To√°n L√Ω CSH</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Oswald:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --tet-red: #d32f2f; --tet-gold: #ffd700; }
        body {
            margin: 0; padding: 0; background: radial-gradient(circle, #b30000, #4a0000);
            font-family: 'Segoe UI', Arial, sans-serif; color: var(--tet-gold);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; width: 100vw; overflow: hidden; position: relative;
        }

        .fullscreen-btn {
            position: fixed; bottom: 20px; right: 20px; padding: 10px 15px;
            background: rgba(255, 215, 0, 0.2); border: 1px solid var(--tet-gold);
            color: var(--tet-gold); border-radius: 10px; cursor: pointer; z-index: 1000;
        }

        /* LI·ªÑN 2 B√äN */
        .lien-dua {
            position: absolute; top: 55%; transform: translateY(-50%);
            width: 100px; height: 70vh;
            background: linear-gradient(180deg, #ff4d4d, #b30000);
            border: 4px solid var(--tet-gold); border-radius: 5px 5px 50px 50px;
            display: flex; flex-direction: column; align-items: center; justify-content: space-evenly;
            padding: 10px 0; z-index: 100; box-shadow: 0 15px 35px rgba(0,0,0,0.6);
        }
        .lien-dua::before {
            content: ""; position: absolute; top: -10px; width: 120%; height: 12px;
            background: #5d4037; border-radius: 5px; border: 1px solid #3e2723;
        }
        .lien-dua::after {
            content: ""; position: absolute; top: -55px; width: 80px; height: 45px;
            border-left: 3px solid #b30000; border-top: 3px solid #b30000;
            transform: rotate(45deg); z-index: -1;
        }
        .lien-dua-tassel {
            position: absolute; bottom: -45px; color: var(--tet-gold); font-size: 2rem;
            animation: sway 2.5s infinite ease-in-out; transform-origin: top;
        }
        @keyframes sway { 0%, 100% { transform: rotate(-8deg); } 50% { transform: rotate(8deg); } }

        .lien-left { left: 45px; } .lien-right { right: 45px; }
        .chu-thu-phap { font-family: 'Dancing Script', cursive; font-size: 2.3rem; color: var(--tet-gold); text-align: center; }
        .so-lien { font-family: 'Oswald', sans-serif; font-size: 2.8rem; color: #fff; text-shadow: 0 0 15px var(--tet-gold); }

        .main-circle {
            width: 420px; height: 420px; border: 12px double var(--tet-gold); border-radius: 50%;
            background: rgba(0,0,0,0.3); display: flex; justify-content: center; align-items: center;box-shadow: 0 0 100px rgba(255, 215, 0, 0.3); z-index: 10;
        }
        .digit {
            font-family: 'Oswald', sans-serif; font-size: 11rem; font-weight: 900;
            text-shadow: 0 0 20px var(--tet-gold); min-width: 105px; text-align: center;
        }
        .spinning { animation: shake 0.1s infinite; filter: blur(2px); color: #fff; }
        @keyframes shake { 0% { transform: translateY(-3px); } 100% { transform: translateY(3px); } }

        .boom-effect { animation: final-boom 0.6s ease-out; text-shadow: 0 0 50px #fff, 0 0 100px var(--tet-gold) !important; color: #fff !important; }
        @keyframes final-boom { 0% { transform: scale(1.3); } 100% { transform: scale(1); } }

        .btn-quay {
            margin-top: 30px; padding: 15px 70px; font-size: 2.2rem; font-weight: bold;
            background: linear-gradient(180deg, #ffeb3b, #fbc02d); border: 5px solid #b71c1c;
            border-radius: 60px; color: #b71c1c; cursor: pointer; box-shadow: 0 10px 0 #7f0000; z-index: 10;
        }
        .btn-quay:active { transform: translateY(5px); box-shadow: 0 5px 0 #7f0000; }
        .btn-quay:disabled { opacity: 0.6; cursor: not-allowed; }

        #history {
            margin-top: 25px; background: rgba(0,0,0,0.5); padding: 10px 40px; border-radius: 40px;
            border: 2px solid var(--tet-gold); z-index: 10; min-width: 450px; text-align: center;
        }
        .history-list { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; margin-top: 8px; }
        .history-item { background: var(--tet-gold); color: #b30000; padding: 5px 15px; border-radius: 20px; font-weight: bold; }

        .petal { position: absolute; background: #ff5858; border-radius: 150% 0 150% 0; opacity: 0.8; animation: fall linear infinite; z-index: 1; }
        @keyframes fall { 0% { transform: translateY(-10vh) rotate(0deg); } 100% { transform: translateY(110vh) rotate(360deg); } }
    </style>
</head>
<body>

    <button class="fullscreen-btn" onclick="toggleFS()">PH√ìNG TO / B·∫¨T LOA</button>

    <div class="lien-dua lien-left">
        <div class="chu-thu-phap">Chuy√™n</div><div class="chu-thu-phap">Khoa</div><div class="chu-thu-phap">H·ªçc</div>
        <div class="lien-dua-tassel">‚ñë‚ñë‚ñë</div>
    </div>
    <div class="lien-dua lien-right">
        <div class="so-lien">11</div><div class="chu-thu-phap">To√°n</div><div class="chu-thu-phap">L√Ω</div>
        <div class="lien-dua-tassel">‚ñë‚ñë‚ñë</div>
    </div>

    <header style="text-align: center; z-index: 10;">
        <h1 style="font-size: 2.8rem; margin: 0; text-shadow: 0 0 20px red;">üßß X·ªî S·ªê T·∫æT MAY M·∫ÆN üßß</h1>
    </header>

    <div class="main-circle">
        <div class="digit-container">
            <span class="digit" id="d1">0</span>
            <span class="digit" id="d2">0</span>
            <span class="digit" id="d3">0</span>
        </div>
    </div><button class="btn-quay" id="btnMain" onclick="startSpin()">QUAY S·ªê</button>

    <div id="history">
        <div style="font-weight: bold;">DANH S√ÅCH S·ªê ƒê√É TR√öNG</div>
        <div class="history-list" id="history-list"></div>
    </div>

    <script>
        // C√†i ƒë·∫∑t √¢m thanh
        const sfxSpin = new Audio('https://github.com/datnekhihi/xo-so-tet/raw/refs/heads/main/X%E1%BB%95%20S%E1%BB%91.mp3');
        const sfxStop = new Audio('https://www.soundjay.com/buttons/sounds/button-16.mp3'); 
        const sfxWin = new Audio('https://www.soundjay.com/misc/sounds/magic-chime-01.mp3'); 

        function toggleFS() {
            // K√≠ch ho·∫°t loa
            sfxSpin.play().then(() => sfxSpin.pause()).catch(() => {});
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(() => {});
            } else {
                document.exitFullscreen();
            }
        }

        const d1 = document.getElementById('d1'), d2 = document.getElementById('d2'), d3 = document.getElementById('d3');
        const btn = document.getElementById('btnMain'), historyList = document.getElementById('history-list');
        let isSpinning = false;

        function startSpin() {
            if (isSpinning) return;
            isSpinning = true; 
            btn.disabled = true;

            // Ch·∫°y √¢m thanh
            sfxSpin.currentTime = 0; sfxSpin.loop = true;
            sfxSpin.play().catch(() => { alert("H√£y b·∫•m n√∫t PH√ìNG TO tr∆∞·ªõc ƒë·ªÉ nghe ti·∫øng!"); });

            // Hi·ªáu ·ª©ng quay s·ªë
            [d1, d2, d3].forEach(d => { d.classList.remove('boom-effect'); d.classList.add('spinning'); });

            const targetNum = Math.floor(Math.random() * 450 + 1).toString().padStart(3, '0');
            
            // H√†m nh·∫£y s·ªë
            const run = (el) => setInterval(() => { el.innerText = Math.floor(Math.random()*10); }, 50);
            const interval1 = run(d1);
            const interval2 = run(d2);
            const interval3 = run(d3);

            // TH·ªúI GIAN D·ª™NG: M·ªói √¥ quay 10 gi√¢y
            // √î 1 d·ª´ng sau 10s
            setTimeout(() => {
                clearInterval(interval1); d1.innerText = targetNum[0];
                d1.classList.remove('spinning'); sfxStop.cloneNode(true).play();
            }, 10000);

            // √î 2 d·ª´ng sau 20s
            setTimeout(() => {
                clearInterval(interval2); d2.innerText = targetNum[1];
                d2.classList.remove('spinning'); sfxStop.cloneNode(true).play();
            }, 20000);

            // √î 3 d·ª´ng sau 30s
            setTimeout(() => {
                clearInterval(interval3); d3.innerText = targetNum[2];
                d3.classList.remove('spinning'); sfxStop.cloneNode(true).play();
                
                sfxSpin.pause(); sfxWin.play();

                // N·ªï ph√°o hoa k·∫øt qu·∫£
                setTimeout(() => {[d1, d2, d3].forEach(d => d.classList.add('boom-effect'));
                    confetti({ particleCount: 400, spread: 130, origin: { y: 0.6 } });
                    
                    const item = document.createElement('div');
                    item.className = 'history-item'; item.innerText = targetNum;
                    historyList.prepend(item);
                    
                    isSpinning = false; btn.disabled = false;
                }, 100);
            }, 30000);
        }

        // C√°nh hoa r∆°i
        setInterval(() => {
            const p = document.createElement('div'); p.className = 'petal';
            p.style.left = Math.random() * 100 + 'vw';
            const size = Math.random() * 15 + 15 + 'px';
            p.style.width = size; p.style.height = size;
            p.style.animationDuration = Math.random() * 3 + 4 + 's';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 7000);
        }, 300);
    </script>
</body>
</html>
